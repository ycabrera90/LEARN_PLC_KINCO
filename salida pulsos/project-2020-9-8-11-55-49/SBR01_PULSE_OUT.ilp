(*2*)
(* Network 0 *)
(*SELECCION DE MODOS DE TRABAJOMODO NORMAL*)
LDN    %M1.0
ST   M_NORMAL
(* Network 1 *)
(*SELECCION DE MODOS DE TRABAJOMODO CALIBRACION DE CERO*)
LD    %M1.0
ANDN    %M1.1
ST   CAL_CERO
(* Network 2 *)
(*SELECCION DE MODOS DE TRABAJOMODO CALIBRACION DE SPAM*)
LD    %M1.0
AND    %M1.1
ST   CAL_SPAM
(* Network 3 *)
(*MODO CALIBRACIONCALIBRACION ELECTRICA DE CERO*)
LD    M_NORMAL
MOVE    I_OUT, I_RAW
(* Network 4 *)
(*MODO CALIBRACIONCALIBRACION ELECTRICA DE SPAM*)
LD    CAL_CERO
AND(
LD    %SM0.0
MOVE    4000, I_RAW
OR(
LD    %M1.2
R_TRIG
R_TO_DI    O_MIN, VAR02
INC    VAR02
DI_TO_R    VAR02, O_MIN
)
OR(
LD    %M1.3
R_TRIG
R_TO_DI    O_MIN, VAR02
DEC    VAR02
DI_TO_R    VAR02, O_MIN
)
)
(* Network 5 *)
(*MODO CALIBRACIONCALIBRACION ELECTRICA DEL FONDO DE ESCALA*)
LD    CAL_SPAM
AND(
LD    %SM0.0
MOVE    20000, I_RAW
OR(
LD    %M1.2
R_TRIG
R_TO_DI    O_MAX, VAR02
INC    VAR02
DI_TO_R    VAR02, O_MAX
)
OR(
LD    %M1.3
R_TRIG
R_TO_DI    O_MAX, VAR02
DEC    VAR02
DI_TO_R    VAR02, O_MAX
)
)
(* Network 6 *)
(*CALCULO DE PENDIENTESETEO DE SALIDA*)
LD    %SM0.0
LINCO    I_MIN, I_MAX, O_MIN, O_MAX, 1.0, I_RAW, VAR01, TRASH
DI_TO_I    VAR01, %AQW0
